define(["jquery"],function(e){function t(t){return e.ajax({method:"GET",url:t})}return{get:t}}),require.config({baseUrl:"js/",paths:{jquery:"../node_modules/jquery/dist/jquery.min",handlebars:"../node_modules/handlebars/dist/handlebars.min",eventEmitter:"../bower_components/eventEmitter/EventEmitter.min"}}),require(["jquery","ajax","todo.controller","pagination.component"],function(e,t,i,n){function o(e){return t.get("http://128.199.76.9:8002/fairesy/count").then(function(t){var i=parseInt(t.cnt/e);return i})}e(document).ready(function(){i.init();var e=o(3);e.then(function(e){var t=new n(".pagination",{});t.on("change",function(e){i.renderEachPage(e.index,e.max)})})})}),define(["jquery","eventEmitter"],function(e,t){function i(i,n){this.ee=new t,this.pagination=e(i),this.option=n||{totalNumberOfPages:5,unitSize:5},this.unitStart=1,this.selectedLi,this.selectedIndex,this.prevArrow,this.nextArrow,this.beforePrevArrow,this.afterNextArrow,this.init()}return i.prototype.init=function(){this._setPaginationNumbers(this.unitStart),this._setPrevNextArrow(),this._setBeforeAfterArrowIfNeeded(),this.pagination.on("click","a",e.proxy(this,"_move")),console.log("pagination component initialization end")},i.prototype._setPrevNextArrow=function(){this.pagination.find("li").first().addClass("prev"),this.pagination.find("li").last().addClass("next"),this.prevArrow=e(".pagination .prev"),this.prevArrow.find("a").html("&#60;"),this.nextArrow=e(".pagination .next"),this.nextArrow.find("a").html("&#62;"),this.prevArrow.addClass("disabled")},i.prototype._setPaginationNumbers=function(t){var i=this.pagination.find("li"),n=t;i.map(function(t,o){0!==t&&t!==i.size()-1&&(e(o).find("a").text(n),n+=1)}),i.eq(1).addClass("selected"),this.selectedLi=e(".pagination .selected")},i.prototype._move=function(e){this._addSelectedToCurrentIndex(e),this.selectedIndex=parseInt(this.selectedLi.find("a").text()),this._checkIfArrowShouldBeDisabled(this.selectedIndex),this.ee.emit("change",{index:this.selectedIndex,max:3}),console.log("selected index is "+this.selectedIndex)},i.prototype.on=function(e,t){this.ee.addListener(e,t)},i.prototype.off=function(e,t){this.ee.removeListener(e,t)},i.prototype._addSelectedToCurrentIndex=function(t){this.selectedLi.removeClass("selected");var i=e(t.target).closest("li");if(i.hasClass("prev")){var n=this.selectedLi.prev();this.selectedLi=n}else if(i.hasClass("next")){var o=this.selectedLi.next();this.selectedLi=o}else this.selectedLi=i;this.selectedLi.addClass("selected")},i.prototype._checkIfArrowShouldBeDisabled=function(e){e===this.unitStart?(this.prevArrow.addClass("disabled"),this.nextArrow.removeClass("disabled")):e===this.option.totalNumberOfPages?(this.nextArrow.addClass("disabled"),this.prevArrow.removeClass("disabled")):(this.prevArrow.hasClass("disabled")&&this.prevArrow.removeClass("disabled"),this.nextArrow.hasClass("disabled")&&this.nextArrow.removeClass("disabled"))},i.prototype._setBeforeAfterArrowIfNeeded=function(){this.option.totalNumberOfPages>this.option.unitSize&&(this.pagination.prepend(e("<li><a href='#'></a></li>")),this.pagination.append(e("<li><a href='#'></a></li>")),this.pagination.css("width","310px"),this.pagination.find("li").first().addClass("beforePrev disabled"),this.pagination.find("li").last().addClass("afterNext"),this.beforePrevArrow=e(".pagination .beforePrev"),this.beforePrevArrow.find("a").html("&#60;&#60;"),this.afterNextArrow=e(".pagination .afterNext"),this.afterNextArrow.find("a").html("&#62;&#62;"))},i}),define(["jquery","ajax","handlebars","todo.template"],function(e,t,i,n){"use strict";function o(){s(),l.on("click",".toggle",r)}function s(){t.get(c+"/page?start=0&limit=3").done(function(e){l.append(e.map(function(e){return a(e.id,e.todo,e.completed)}).join(""))})}function r(i){var n=e(i.target).closest("li"),o=n.data("id");n.toggleClass("completed");var s=n.hasClass("completed")?1:0;t.put(c,o,{completed:s}).done(function(){})}function a(e,t,o){var s=i.compile(n.todo),r=s({completed:1===o?"completed":"",checked:1===o?"checked":"","todo-id":e,"todo-name":t});return r}function d(e,i){var n=i*(e-1),o="http://128.199.76.9:8002/fairesy/page?start="+n+"&limit="+i;h[e]||(h[e]=t.get(o).promise()),h[e].done(function(e){l.empty(),l.append(e.map(function(e){return a(e.id,e.todo,e.completed)}).join(""))})}var l=(e(".main"),e(".todo-list")),c="http://128.199.76.9:8002/fairesy",h={};return{init:o,renderEachPage:d}}),define([],function(){return{todo:'<li data-id="{{todo-id}}" class="{{#if completed}}completed{{/if}}"><input class="toggle" type="checkbox" {{#if completed}}checked{{/if}}><label>{{todo-name}}</label></li>'}});